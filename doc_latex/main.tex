%%%%% Preamble
\documentclass[10pt,a4paper,parskip=half,DIV=12]{scrartcl}
% KOMA scrartcl is called for several reasons:
% Nicer page margins without the need of the 'geometry' package
% Perfectly fitting abstract environment
% High customizability
\usepackage{url}
\usepackage{color}
\usepackage{fontspec}
\usepackage{tikz}
\usepackage{listings}
\usepackage{setspace}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{epigraph} % Beautiful quotes
% Code environment
\lstset{language=Ruby, tabsize=2}
\def\codefont{
  \fontspec{Courier New}
  \fontsize{7pt}{8pt}\selectfont}
\definecolor{codebgcolor}{HTML}{EDEDED}
\newenvironment{code}
{\begin{center}
    \begin{tikzpicture}
      \node [fill=codebgcolor,rounded corners=5pt]
      \bgroup
      \bgroup\codefont
      \begin{tabular}{l}}
      {\end{tabular}
      \egroup
      \egroup;
    \end{tikzpicture}
  \end{center}}
% Use it like:
%\begin{code}
%\begin{lstlisting}
%public class HelloWorld {
%  public static void main(String[] args) {
%    /* ... more code ... */
%  }
%}
%\end{lstlisting}
%\end{code}
%
%I can also include the source code from an external file using -
%
%\begin{code}
%\lstinputlisting[...options]{...filepath}
%\end{code}
% Code environment end
% Bug and notes command
\newcommand{\bug}[2][] {\todo[color=red, caption={#2}, #1]
 {\begin{spacing}{0.5}#2\end{spacing}}}
\newcommand{\smalltodo}[2][] {\todo[caption={#2}, #1]
 {\begin{spacing}{0.5}#2\end{spacing}}}
% Bug and notes command end

% Epigraph style
%\renewcommand{\textflush}{flushleft} \renewcommand{\sourceflush}{flushleft}
\renewcommand{\epigraphflush}{center}
\renewcommand{\textflush}{flushepinormal}
\setlength{\epigraphwidth}{14cm}

\input{article.tex}
\input{content.tex}

\todototoc
\listoftodos
\bibliographystyle{plainurl}
\bibliography{ruby-xbee}
\end{document}